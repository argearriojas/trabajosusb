\NeedsTeXFormat{LaTeX2e}

%----------------------- OPCIONES Y PAQUETES
%
%
\newif\if@ams \@amstrue
\newif\if@tablas \@tablastrue
\newif\if@figuras \@figurasfalse
\newif\if@si \@sifalse
\newif\if@hyp
\newif\if@inputenc \@inputenctrue
\newif\if@caption \@captiontrue
\newif\if@cite \@citetrue
\DeclareOption{ams}{\@amstrue}
\DeclareOption{noams}{\@amsfalse}
\DeclareOption{tablas}{\@tablastrue}
\DeclareOption{notablas}{\@tablasfalse}
\DeclareOption{figuras}{\@figurastrue}
\DeclareOption{si}{\@sitrue}
\DeclareOption{nohyperref}{\@hypfalse}
\DeclareOption{noinputenc}{\@inputencfalse}
\DeclareOption{nocaption}{\@captionfalse}
\DeclareOption{nocite}{\@citefalse}
\DeclareOption{hyperref}{\@hyptrue}
\ifpdf
  \DeclareOption{all}{\@amstrue\@tablastrue\@figurastrue\@sitrue\@hyptrue}
\else
  \DeclareOption{all}{\@amstrue\@tablastrue\@figurastrue\@sitrue}
\fi
\DeclareOption{none}{\@amsfalse\@tablasfalse\@hypfalse}
\ifpdf
  \@hyptrue
\fi
\ifxetex
  \@hyptrue
\fi
\ProcessOptions\relax

%\RequirePackage{ifxetex}

%\ifxetex
%  \RequirePackage{fontspec}
%  \setmainfont{Times New Roman}
%  \RequirePackage{polyglossia}
%  \setmainlanguage{spanish}
%\else
%  \RequirePackage[T1]{fontenc}
%  \RequirePackage[utf8]{inputenc}
%  \RequirePackage[spanish,activeacute]{babel}
%  \RequirePackage{lmodern}
%\fi


%\RequirePackage[spanish,es-lcroman,es-nolayout,es-tabla]{babel} %hyphenation, roman, cuadro->tabla
%\RequirePackage[spanish,activeacute]{babel} %hyphenation, roman, cuadro->tabla

\RequirePackage{calc,setspace,fancyhdr}
\RequirePackage[letterpaper, top=2.5cm, bottom=2.5cm, right=2.5cm, left=3cm]{geometry} %M�rgenes de p�gina
\RequirePackage[overload]{textcase}
\if@caption
  \RequirePackage{caption}
\fi
%\providecommand{\inputencodingname}{}
%\ifthenelse{\equal{\inputencodingname}{}}{\if@inputenc
%  \RequirePackage[utf8]{inputenc}
%\fi}{}
\if@ams
  \RequirePackage{amsfonts,amsmath,amssymb,amsthm}
\fi
\if@tablas
  \RequirePackage{array,longtable,booktabs,multirow}
\fi
\if@si
  \RequirePackage{siunitx}
\fi
\if@figuras
  \RequirePackage[titles,subfigure]{tocloft}
  \RequirePackage{subfigure}
\else
  \RequirePackage[titles]{tocloft}
\fi
\if@hyp
  \RequirePackage[bookmarksnumbered=true, pdfstartview=FitH, pdfpagelayout=OneColumn]{hyperref}
  \addto\extrasspanish{
    \def\sectionautorefname{Sección}
  }
\fi
\if@cite
  \RequirePackage{cite}
\fi

%
%
%----------------------- OPCIONES Y PAQUETES

%----------------------- NUMERO DE PAGINA (requiere fancyhdr)
%
%
\pagestyle{fancy}
\fancyhead{}
\fancyfoot{}
\renewcommand{\headrulewidth}{0pt}
\fancyfoot[c]{\thepage}
\setlength{\headheight}{14.5pt}
\newif\if@cuerpo \@cuerpofalse
\newcommand{\cuerpo}{    % Acomoda el n�mero de p�gina para el cuerpo
  \@cuerpotrue
  \if@openright\cleardoublepage\else\clearpage\fi
  \pagenumbering{arabic}
  \fancyfoot{}
  \fancyhead[r]{\thepage}
  \pagestyle{fancy}
}
%
%
%----------------------- NUMERO DE PAGINA


%----------------------- TOCLOFT (Requiere tocloft)
%
%
\setlength{\cftfigindent}{0pt}
\setlength{\cfttabindent}{0pt}
\if@figuras{
  \setlength{\cftsubfigindent}{0pt}
  \setlength{\cftsubtabindent}{0pt}
\fi
\cftsetpnumwidth{1.6em}%La caja del numero de pagina es muy peque�a para viii

\setlength{\cftsecindent}{0pt}    %Elimina sangria para la [sub][sub]seccion
\setlength{\cftsubsecindent}{0pt}
\setlength{\cftsubsubsecindent}{0pt}

\renewcommand{\cftdotsep}{1}	%cambia el espacio entre puntos separadores
\renewcommand{\cftchapleader}{\cftdotfill{\cftdotsep}} %coloca puntos separadores a los capítulos

\setlength{\cftbeforechapskip}{1em} %cambia el espaciado previo a cada capítulo

\renewcommand{\cftchapfont}{\normalsize\bfseries} %Mismo formato que en el texto (no me gusta)
\renewcommand{\cftsecfont}{\normalsize}
\renewcommand{\cftsubsecfont}{\normalsize}
\renewcommand{\cftsubsubsecfont}{\normalsize}

\newlength{\negspace}                                 %Elimina un espacio en la caja del numero de [sub][sub]seccion
\settowidth{\negspace}{\ }
\renewcommand{\cftsecpresnum}{\hspace{-1.1\negspace}}
\renewcommand{\cftsubsecpresnum}{\cftsecpresnum}
\renewcommand{\cftsubsubsecpresnum}{\cftsecpresnum}

%
%
%----------------------- TOC



%----------------------- BEGIN DOCUMENT (babel, caption, numeracion)
\AtBeginDocument{
  \def\today{Sartenejas, \ifcase\month\or                  %Formato de fecha para \today
    Enero\or Febrero\or Marzo\or Abril\or Mayo\or Junio\or
    Julio\or Agosto\or Septiembre\or Octubre\or Noviembre\or Diciembre\fi
    \space de\space \number\year}
   \renewcommand{\tablename}{Tabla}                    %DESCOMENTAR SI NO SE USA es-tabla EN BABEL
   \renewcommand{\listtablename}{Índice de tablas}     %DESCOMENTAR SI NO SE USA es-tabla EN BABEL
  \renewcommand{\bibname}{REFERENCIAS}   %Correccion a babel
  \renewcommand{\appendixname}{APÉNDICE}                %Correccion a babel
  \renewcommand{\contentsname}{ÍNDICE GENERAL}
%   \renewcommand{\listtablename}{\'Indice de tablas}     %DESCOMENTAR SI NO SE USA es-tabla EN BABEL
%  \renewcommand{\bibname}{REFERENCIAS BIBLIOGR\'AFICAS}   %Correccion a babel
%  \renewcommand{\appendixname}{AP\'ENDICE}                %Correccion a babel
%  \renewcommand{\contentsname}{\'INDICE GENERAL}
  \renewcommand{\listfigurename}{LISTA DE FIGURAS}
  \renewcommand{\listtablename}{LISTA DE TABLAS}
  \settowidth\parindent{\ \ \ }                         %Sangria
  \pagenumbering{roman}                                 %Numeracion romana para primeras paginas
  \fancyfoot{}
  \fancyhead[r]{\thepage}
  \pagestyle{fancy}
%  \setcounter{page}{1}                                  %Ajuste al numero de pagina. Resumen debe ser iv
  \maketitle                                            %Hace caratula y pagina de titulo
  \addtolength{\topmargin}{-2.5pt}                      %Correccion ligera al margen superior, puede depender de la letra
  \setlength{\parskip}{6pt}                             %Distancia entre parrafos (interlineado + 6pt)
  \if@caption
    \DeclareCaptionLabelSeparator{punto}{. }              %Como separa etiqueta de texto (figuras y tablas)
    \captionsetup[table]{labelsep=punto,labelfont=rm,aboveskip=6pt,belowskip=\baselineskip-6pt, position=top}
    \captionsetup[figure]{labelsep=punto,labelfont=rm,aboveskip=8pt,belowskip=\baselineskip-6pt, position=bottom}
  \fi
}

\endinput
